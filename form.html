<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta content="text/html; charset=utf-8" http-equiv="content-type">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Simulateur Energie Solaire SUNBERRY</title>
    <meta name="description" content="A free HTML template and UI Kit built on Bootstrap">
    <meta name="keywords" content="free html template, bootstrap, ui kit, sass">
    <meta name="author" content="Peter Finlan and Taty Grassini Codrops">
    <link rel="apple-touch-icon" sizes="57x57" href="./assets/img/favicon/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="./assets/img/favicon/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="./assets/img/favicon/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="./assets/img/favicon/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="./assets/img/favicon/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="./assets/img/favicon/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="./assets/img/favicon/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="./assets/img/favicon/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="./assets/img/favicon/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="./assets/img/favicon/favicon-32x32.png"
      sizes="32x32">
    <link rel="icon" type="image/png" href="./assets/img/favicon/android-chrome-192x192.png"
      sizes="192x192">
    <link rel="icon" type="image/png" href="./assets/img/favicon/favicon-96x96.png"
      sizes="96x96">
    <link rel="icon" type="image/png" href="./assets/img/favicon/favicon-16x16.png"
      sizes="16x16">
    <link rel="manifest" href="./assets/img/favicon/manifest.json">
    <link rel="shortcut icon" href="./assets/img/favicon/favicon.ico">
    <meta name="msapplication-TileColor" content="#663fb5">
    <meta name="msapplication-TileImage" content="./assets/img/favicon/mstile-144x144.png">
    <meta name="msapplication-config" content="./assets/img/favicon/browserconfig.xml">
    <meta name="theme-color" content="#663fb5">
  </head>		
<body>
    <!-- Navigation
    ================================================== -->
    <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-inverse-custom">
      <div class="container">&nbsp; <a class="navbar-brand mr-auto" href="#"> <span
            class="sr-only">Land.io</span> </a>
        <div class="hidden-md-up"> <a class="navbar-toggler collapsed" data-toggle="collapse"
            href="#collapsingNavbar" aria-expanded="false" aria-controls="collapsingNavbar">
            <div class="sr-only">Toggle mobile navigation</div>
          </a> </div>
        <div id="collapsingNavbar" class="collapse navbar-toggleable-custom">
          <ul class="nav navbar-nav navbar-nav-transparent float-right">
            <li class="nav-item nav-item-toggable"> <a class="nav-link" href="./index-carousel.html">Slides</a>
            </li>
            <li class="nav-item nav-item-toggable"> <a class="nav-link" href="./ui-elements.html">UI
                Kit</a> </li>
            <li class="nav-item nav-item-toggable"> <a class="nav-link" href="https://github.com/tatygrassini/landio-html"
                target="_blank" rel="nofollow">GitHub</a> </li>
            <li class="nav-item nav-item-toggable hidden-md-up">
              <form class="navbar-form"> <input class="form-control navbar-search-input"
                  placeholder="Type your search &amp; hit Enter…" type="text"> </form>
            </li>
            <li class="navbar-divider hidden-md-down" aria-hidden="true"><br>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- Hero Section
    ================================================== -->
    <header class="jumbotron bg-dark d-md-flex flex-md-column justify-content-md-center align-items-md-center"
      role="banner">
      <div class="text-center">
        <h1 class="display-3">Sunberry</h1>
        <h2 class="m-b-lg">Simulateur Solaire</h2>
        <h2 class="mb-5"></h2>
        <a class="btn btn-outline-light btn-lg btn-outline-light mb-4 mb-md-0" href="#content"
          role="button">Calculer !</a> </div>
    </header>	
    <!-- Intro
    ================================================== -->
    <section class="section-intro bg-light text-center">
      <div class="container">
		<a name="content"></a>
        <h3 class="wp wp-1">Simulez l'énergie solaire disponible pour votre habitation</h3>
        <p class="lead wp wp-2">Notre simulateur vous inquide l'énergie que vous pourrez collecter grâce à vos panneaux solaires thermiques Sunberry. Il tient compte de la position de votre habitation et du relief alentours (collines, montagnes) pour une très grande précision. Les résultats correspondent à une orientation plein Sud.</p>	
    

<script>
function initMap() {
    var map = new google.maps.Map(document.getElementById('map'), {
      center: {lat: 46.583, lng: 2.548},
      zoom: 13
    });
    var input = document.getElementById('searchInput');
    map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);

    var autocomplete = new google.maps.places.Autocomplete(input);
    autocomplete.bindTo('bounds', map);

    var infowindow = new google.maps.InfoWindow();
    var marker = new google.maps.Marker({
        map: map,
        anchorPoint: new google.maps.Point(0, -29)
    });
    
        // marker drag event
    google.maps.event.addListener(marker,'drag',function(event) {
        document.getElementById('lat').value = event.latLng.lat();
        document.getElementById('lon').value = event.latLng.lng();
    });

    //marker drag event end
    google.maps.event.addListener(marker,'dragend',function(event) {
        document.getElementById('lat').value = event.latLng.lat();
        document.getElementById('lon').value = event.latLng.lng();
    });
    
        google.maps.event.addListener(map, 'click', function(event) {
            placeMarker(event.latLng);
            document.getElementById('lat').value = event.latLng.lat();
			document.getElementById('lon').value = event.latLng.lng();
        });

        function placeMarker(location) {



            if (marker == undefined){
                marker = new google.maps.Marker({
                    position: location,
                    map: map, 
                    animation: google.maps.Animation.DROP,
                });
            }
            else{
                marker.setPosition(location);
            }
            map.setCenter(location);

        }    

    autocomplete.addListener('place_changed', function() {
        infowindow.close();
        marker.setVisible(false);
        var place = autocomplete.getPlace();
        if (!place.geometry) {
            window.alert("Autocomplete's returned place contains no geometry");
            return;
        }
  
        // If the place has a geometry, then present it on a map.
        if (place.geometry.viewport) {
            map.fitBounds(place.geometry.viewport);
        } else {
            map.setCenter(place.geometry.location);
            map.setZoom(17);
        }
        marker.setIcon(({
            url: place.icon,
            size: new google.maps.Size(71, 71),
            origin: new google.maps.Point(0, 0),
            anchor: new google.maps.Point(17, 34),
            scaledSize: new google.maps.Size(35, 35)
        }));
        marker.setPosition(place.geometry.location);
        marker.setVisible(true);
    
        var address = '';
        if (place.address_components) {
            address = [
              (place.address_components[0] && place.address_components[0].short_name || ''),
              (place.address_components[1] && place.address_components[1].short_name || ''),
              (place.address_components[2] && place.address_components[2].short_name || '')
            ].join(' ');
        }
    
        infowindow.setContent('<div><strong>' + place.name + '</strong><br>' + address);
        infowindow.open(map, marker);
      
        //Location details
        for (var i = 0; i < place.address_components.length; i++) {
            if(place.address_components[i].types[0] == 'postal_code'){
                document.getElementById('postal_code').innerHTML = place.address_components[i].long_name;
            }
            if(place.address_components[i].types[0] == 'country'){
                document.getElementById('country').innerHTML = place.address_components[i].long_name;
            }
        }
        document.getElementById('location').innerHTML = place.formatted_address;
        document.getElementById('lat').innerHTML = place.geometry.location.lat();
        document.getElementById('lon').innerHTML = place.geometry.location.lng();
    });
}
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBsnK27FPZCMecMEIQEy--vSZMHGfFFszo&libraries=places&callback=initMap" async defer></script>

<input id="searchInput" class="controls" type="text" placeholder="Enter a location">
<div id="map" style="height: 400px;"></div>
<p>Déplacez le curseur sur votre habitation. Utilisez le zoom et la vue satellite pour un maximum de précision.</p>


<form action="myform.php" method="post">
<p>E-mail: <input type="text" name="email" required/></p>

<p>Votre habitation</br>

    Latitude:<input name='lat' id='lat' required>  
    Longitude:<input name='lon' id='lon' required>
    </br>(Cliquez sur la carte, les coordonnées seront remplies automatiquent)
</p>
<!--<p>Latitude: <input type="text" name="lat" /></p>
<p>Longitude: <input type="text" name="lon" /></p>-->
<p>Inclinaison: <input type="text" name="pente" required/></br>Mesurez la pente de votre toit (<a href="https://play.google.com/store/apps/details?id=com.prolificmethods.pitchgauge&hl=fr">Android</a> / <a href="https://itunes.apple.com/fr/app/pitch-gauge/id389715382?mt=8">Iphone</a>)</p>


<p><input type="submit" value="CALCULER"></p>
</form>

      </div>
    </section>    

    <link rel="stylesheet" href="./assets/css/landio.min.css">
    <script src="./assets/js/plugins/jquery.min.js"></script>
    <script src="./assets/js/plugins/popper.min.js"></script>
    <script src="./assets/js/plugins/bootstrap.min.js"></script>
    <script src="./assets/js/plugins/jquery.waypoints.min.js"></script>
    <script src="./assets/js/landio.js"></script>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-86206346-1', 'auto');
ga('send', 'pageview');
</script>

</body>
</html>
